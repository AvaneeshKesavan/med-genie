model User {
  id              Int      @id @default(autoincrement())
  name            String   @db.VarChar(100)
  email           String   @unique @db.VarChar(254)
  password        String   @db.VarChar(255)
  confirmpassword String   @db.VarChar(255)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  lastLoginAt     DateTime?
  isActive        Boolean  @default(true)
  role            String   @default("user") @db.VarChar(20)
  failedLoginAttempts Int  @default(0)
  lockedUntil     DateTime?
  lastPasswordChange DateTime @default(now())
  passwordVersion Int      @default(1)

  // ðŸ”‘ New fields for password reset
  resetToken       String?   @db.VarChar(255)
  resetTokenExpiry DateTime?

  // Relations
  auditLogs       AuditLog[]
  sessions        Session[]
  healthProfile   HealthProfile?
  chatSessions    ChatSession[]

  @@map("users")
  @@index([email])
  @@index([createdAt])
  @@index([isActive])
  @@index([role])
  @@index([resetToken])        // index for faster lookups
  @@index([resetTokenExpiry])
}
